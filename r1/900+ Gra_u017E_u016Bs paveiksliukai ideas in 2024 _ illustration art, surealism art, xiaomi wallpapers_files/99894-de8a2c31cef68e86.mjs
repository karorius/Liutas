"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[99894],{551587:(e,t,i)=>{i.d(t,{Z:()=>o});let o=e=>e.startsWith("enabled")||e.startsWith("employee")},910711:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(667294),n=i(883119),l=i(406893),s=i(749886),a=i(771981),r=i(785893);function d({playing:e,zIndexValue:t}){return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(l.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,r.jsx)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:s.yR,top:!0,zIndex:t?new n.Ry(t):a.lt,children:!e&&(0,r.jsx)(n.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},983435:(e,t,i)=>{i.d(t,{Z:()=>x});var o=i(667294),n=i(883119),l=i(140017),s=i(558273),a=i(340523),r=i(551587),d=i(5859),u=i(797456),c=i(749886),_=i(214164),p=i(217058),h=i(623409),g=i(554786),y=i(115557),m=i(369708),b=i(785893);let v=({accessibilityLabel:e,dataTestId:t,disable:i,handleTap:o,icon:l})=>(0,b.jsx)(n.xu,{"data-test-id":t,opacity:i?.5:void 0,children:(0,b.jsx)(n.iP,{disabled:i,onTap:o,children:(0,b.jsx)(n.JO,{accessibilityLabel:e,color:"light",icon:l,size:16})})});function x({activePageIndex:e,handlePanelChange:t,handlePlay:i,handlePause:x,handlePausePlay:f,handleMute:P,handleVideoScrubbingNewPage:w,handleWatchAgain:S,isPlaying:I,isMuted:j,isPanelOpen:A,pages:C,pageCount:z,pinId:L="",progressInfo:M,showEndCard:E,showVideoControls:T=!1,viewParameter:k,isStoryPin:V=!0,captionsUrl:$="",captionsExpGroup:H=""}){let D=(0,l.ZP)(),{currentTime:B}=M||{},{seekTimes:R}=(0,_.Hx)(),Z=(0,d.B)(),O=(0,m.rG)(),{checkExperiment:F}=(0,a.F)(),J=(0,g.HG)(),{isAuthenticated:W}=Z,{captionsEnabled:q}=O,G=(0,h.Z)(),N=C[e],{should_mute:U}=N||j,X=Object.keys(R).includes(L)&&R[L]?R[L]:B,K=(0,o.useMemo)(()=>C.map(e=>{let t=e.blocks?.find(e=>3===e.block_type),i=t?.video?.video_list?.V_HLSV3_MOBILE?.duration||t?.video?.video_list?.V_720P?.duration;return i?{duration:i,isVideo:!0}:{duration:s.oN,isVideo:!1}}),[C]),Y=[{duration:M?.duration||0,isVideo:!0}],Q=V?K:Y,ee=(N&&N.blocks?.[0]||{}).video?.video_list?.V_HLSV3_MOBILE?.captions_urls,et=!1;(ee&&0!==Object.keys(ee).length||$)&&(et=!0);let ei=V&&et&&J?F(W?"auth_desktop_video_pin_captions":"unauth_desktop_video_pin_captions").group:"",eo=H||ei,en=(0,r.Z)(eo),el=(0,o.useMemo)(()=>Q.reduce((e,t)=>e+(t.duration||0),0)/(V?y.gJ:1),[Q,V]),es=(0,o.useMemo)(()=>Q.filter((t,i)=>i<e).reduce((e,t)=>e+(t.duration||0),0)/y.gJ,[Q,e]),ea=Q.length>0&&Q[e].isVideo?X+es:5*B+es,er=D._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),ed=D._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,b.jsxs)(n.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,b.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:T||!I?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,b.jsxs)(n.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,b.jsx)(v,{accessibilityLabel:I?D._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):D._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:`story-pin-closeup-${I?"pause":"play"}`,handleTap:E&&S?S:f,icon:I?"pause":"play"}),M&&(0,b.jsxs)(n.xu,{"data-test-id":"time-display",children:[(0,b.jsx)(n.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,c.Lc)(ea)}`})," ",(0,b.jsx)(n.xu,{display:"inlineBlock",opacity:.6,children:(0,b.jsx)(n.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,c.Lc)(el)}`})})]})]}),(0,b.jsxs)(n.kC,{direction:"row",gap:5,children:[(eo.startsWith("enabled_captions")||eo.startsWith("employees"))&&et&&(0,b.jsx)(v,{accessibilityLabel:q?ed:er,dataTestId:`closed-captions-button-${q?"disable":"enable"}`,handleTap:()=>{let e=J?"desktop_pin_page":"mweb_pin_page";q?(0,p.My)(`${e}.closed_captions_button.toggle_off`):(0,p.My)(`${e}.closed_captions_button.toggle_on`),G({action:"click",item:"closed-captions-button"}),O.setCaptionsEnabled(!q)},icon:q?"captions":"captions-outline"}),(0,b.jsx)(v,{accessibilityLabel:j?D._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):D._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:`story-pin-closeup-${j?"unmute":"mute"}`,disable:U,handleTap:P,icon:j?"mute":"sound"}),(0,b.jsx)(v,{accessibilityLabel:A?D._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):D._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:`story-pin-closeup-${A?"maximize":"minimize"}`,handleTap:t,icon:A?"maximize":"minimize"})]})]}),(0,b.jsx)(u.ZP,{activePageCurrentTime:X,activePageIndex:e,currentTime:ea,duration:el,handlePause:x,handlePlay:i,handleVideoScrubbingNewPage:w,isPlaying:I,pageCount:z,pageDurations:Q,pinId:L,progressInfo:M,shouldShowPlayhead:!0,showEndCard:E,showVideoControls:T,videoControlsExp:en,videoDurations:Q,viewParameter:k})]})}},797456:(e,t,i)=>{i.d(t,{$E:()=>m,$:()=>b,ZP:()=>P});var o=i(667294),n=i(883119),l=i(587703),s=i(140017),a=i(340523),r=i(5859),d=i(558273),u=i(115557),c=i(785893);function _({activePageCurrentTime:e,pillHeight:t,progressInfo:i,videoDuration:o}){let l=i?.currentTime??0,s=i?.duration??d.P6,a=`${o?.isVideo?Math.floor(1e4*(e||l)/(o.duration/u.gJ))/100:l/s*100}%`;return(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:m}},height:t,overflow:"hidden",rounding:"pill",children:(0,c.jsx)(n.xu,{color:b,dangerouslySetInlineStyle:{__style:{width:a}},height:"100%",rounding:"pill"})})}var p=i(749886),h=i(214164),g=i(554786),y=i(149722);let m="rgba(255,255,255,0.24)",b="light",v=()=>{},x=({children:e,setHoveringChange:t,handleMouseDown:i,handleMouseLeave:o,handleTouchStart:l,playhead:a,isPlaying:r,showVideoControls:d,videoControlsExp:u})=>{let _=(0,s.ZP)(),p=!(0,g.HG)();return u?(0,c.jsx)(n.iP,{children:(0,c.jsx)(n.xu,{ref:a,alignItems:"center","aria-label":_._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:p?"center":"start",marginBottom:p?0:6,minHeight:"8px",onFocus:t(!0),onMouseDown:i,onMouseLeave:o,onMouseOver:t(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,opacity:u&&(d||!r)?1:0,paddingY:p?6:0,position:"relative",role:"progressbar",width:"100%",children:e})}):(0,c.jsx)(n.xu,{ref:a,alignItems:"center","aria-label":_._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:p?"center":"start",marginBottom:p?0:6,minHeight:"8px",onFocus:t(!0),onMouseDown:i,onMouseLeave:o,onMouseOver:t(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,paddingY:p?6:0,position:"relative",role:"progressbar",width:"100%",children:e})},f=({currentTime:e=0,inRemoveRelatedStreamsExp:t,isMobile:i,isRTL:o,isSeeking:l,scrubberWidth:s,videoControlsExp:a})=>(0,c.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:o?{right:s}:{left:s}},"data-test-id":"video-progress-bar",position:"relative",children:[i&&l&&!t&&(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{top:"-32px"}},marginStart:-3,position:"absolute",children:(0,c.jsx)(n.xv,{color:"light",size:"100",children:(0,p.Lc)(e)})}),(0,c.jsx)(n.xu,{color:b,height:4,position:"absolute",rounding:"pill",children:(0,c.jsx)(n.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:l&&a?-8:-6}},height:l&&a?16:12,marginStart:-2,rounding:"circle",width:l&&a?16:12})})]});function P({activePageIndex:e,activePageCurrentTime:t,pageCount:i,progressInfo:s,showEndCard:d,duration:u=0,currentTime:p=0,pageDurations:m=[],handlePlay:P=v,handlePause:w=v,handleVideoScrubbingNewPage:S=v,videoDurations:I=[],viewParameter:j,isInactiveStreamPin:A=!1,isPlaying:C=!1,setVideoProgress:z,shouldShowPlayhead:L=!1,showVideoControls:M=!0,pinId:E="",videoControlsExp:T=!1}){let k=!(0,g.HG)(),V=(0,o.useRef)(null),{checkExperiment:$}=(0,a.F)(),{isRTL:H}=(0,r.B)(),[D,B]=(0,o.useState)(!1),[R,Z]=(0,o.useState)(C),[O,F]=(0,o.useState)(),J=(0,l.Z)(),{isSeekingIdeaPin:W}=(0,h.Hx)(),{updateSeekTime:q,updateSeekingIdeaPin:G}=(0,h.RC)(),N=(0,y.Z)(),U=N.isAuth,X=(0,o.useCallback)((t,o)=>{if(!A&&o<=i){if(o!==e&&S(o),z){let{isVideo:e}=I[o];z({currentTime:t/1e3,duration:e?s?.duration??1:5,pinId:E})}q(t/1e3,E)}J({event_type:101,view_type:3,view_parameter:j,component:14302})},[e,S,A,J,i,E,s?.duration,z,q,I,j]),K=`${p/u*100}%`,Y=m.map(e=>`${(e.duration||0)/u/10}%`),Q=(0,o.useMemo)(()=>{let e=0;return m.map(({duration:t})=>{let i=t+e,o={min:e,max:i};return e=i,o})},[m]),ee=k&&$(U?"closeup_auth_mweb_remove_streams":"closeup_unauth_mweb_remove_streams").anyEnabled,et=D?"0 1.2px":"0 1px",ei=e=>()=>B(e),eo=(0,o.useCallback)(e=>{if(V.current){let{left:t=0,right:i=0,width:o=0}=V.current.getBoundingClientRect(),n=H?Math.max(0,Math.min((i-e)/o,1)):Math.max(0,Math.min((e-t)/o,1)),l=n*u*1e3,s=Q.findIndex(e=>l>=e.min&&l<=e.max),a=-1===s?0:s;X(l-Q[a].min,a)}},[u,X,Q,H]),en=()=>{W||(Z(C||d),G(!0))},el=(0,o.useCallback)(e=>{W&&eo(e.pageX)},[eo,W]),es=(0,o.useCallback)(e=>{if(W){e.preventDefault();let t=Array.from(e.changedTouches).find(e=>e.identifier===O);t&&eo(t.pageX)}},[W,eo,O]),ea=(0,o.useCallback)(()=>{G(!1),ei(!1),F(void 0),R&&P()},[G,P,R]),er=(0,o.useCallback)(e=>{let t=Array.from(e.changedTouches).find(e=>e.identifier===O);t&&(G(!1),ei(!1),F(void 0)),R&&P()},[P,R,O,G]);(0,o.useEffect)(()=>(W&&!A&&(window.addEventListener("mousemove",el),window.addEventListener("mouseup",ea),window.addEventListener("touchmove",es),window.addEventListener("touchend",er)),()=>{window.removeEventListener("mousemove",el),window.removeEventListener("mouseup",ea),window.removeEventListener("touchmove",es),window.removeEventListener("touchend",er)}),[el,ea,er,es,A,W,eo,O]);let ed=i=>i<e||d?(0,c.jsx)(n.xu,{color:b,height:4,rounding:"pill"}):e===i&&s?(0,c.jsx)(_,{activePageCurrentTime:t,pillHeight:4,progressInfo:s,videoDuration:I[i]}):(0,c.jsx)(n.xu,{color:b,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"});return(0,c.jsxs)(x,{handleMouseDown:e=>{en(),C&&w(),eo(e.pageX)},handleMouseLeave:()=>{ei(!1)},handleTouchStart:e=>{en(),ei(!0);let t=e.changedTouches[0];F(t.identifier),C&&w(),eo(t.pageX)},isPlaying:C,playhead:V,setHoveringChange:ei,showVideoControls:M,videoControlsExp:T,children:[L&&(M&&T||D||W||k)&&(0,c.jsx)(f,{currentTime:t,inRemoveRelatedStreamsExp:ee,isMobile:k,isRTL:H,isSeeking:W,scrubberWidth:K,videoControlsExp:T}),Array(i).fill().map((e,t)=>(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{margin:et}},flex:"grow",width:Y.length===i?Y[t]:"auto",children:(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:ed(t)})},`${E}-${t}`))]})}},537513:(e,t,i)=>{i.d(t,{Z$:()=>s,by:()=>a,eL:()=>l});var o=i(419075),n=i(217058);let l=e=>{if("undefined"==typeof window)return"";let t=0,i=document.querySelector('[data-test-id="header"]');if(null!==i){let{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":let o=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==o){let{height:e}=o.getBoundingClientRect();t+=e}break;case"SearchItem":let n=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==n){let{height:e}=n.getBoundingClientRect();t+=e}let l=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');if(null!==l){let{height:e}=l.getBoundingClientRect();t+=e}}return`${-1*t}px 0px 0px 0px`},s=({videosDuration:e,vHLSV4VideoDuration:t,storyPinDataTotalVideoDuration:i})=>{let n=(0,o.Z)(e||t||i||0);return n},a=(e,t,i)=>{e?(0,n.My)(`${t}.mute_button.toggle_off`):(0,n.My)(`${t}.mute_button.toggle_on`),i({action:"click",item:"mute-button"})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/99894-de8a2c31cef68e86.mjs.map